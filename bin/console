#!/usr/bin/env ruby
# frozen_string_literal: true

require 'bundler/setup'
require 'stardot'
require 'pry'

class Commands < Stardot::Plugin
  def run(command)
    puts "running: #{command}"
  end
end

class Asdf < Stardot::Plugin
  def install(language, **opts)
    puts "asdf plugin-install #{language}"
    if opts[:versions]
      opts[:versions].each do |version|
        puts "|> asdf install #{language} #{version}"
      end
    end
  end
end

class Brew < Stardot::Plugin
  def install(package, **opts)
    puts "brew install #{package} with opts: #{opts}"
  end
end

class Symlink < Stardot::Plugin
  def ln(from, to = Dir.home)
    from = expand_path from
    to   = expand_path to

    puts "symlink: #{from} ~> #{to}"
  end
end

Stardot.configure_using_config_file!

Pry.start unless ARGV.include? '--once'
